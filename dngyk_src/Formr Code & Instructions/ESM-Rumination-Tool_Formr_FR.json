{
    "name": "ESMformrRunExport",
    "units": [
        {
            "type": "Survey",
            "description": "Enrolling survey",
            "position": 1,
            "special": "",
            "survey_data": {
                "name": "enrolling_survey",
                "items": [
                    {
                        "type": "note",
                        "choice_list": null,
                        "type_options": null,
                        "name": "Intro",
                        "label": "Bienvenue,\n \nMerci d'avoir pris le temps de faire l'entretien avec moi et d'avoir accepté de participer à cette recherche. Votre engagement fait plaisir à voir.\nVotre participation rend cette étude possible et c'est grâce à vous et grâce aux autres participants que nous pourrons contribuer à améliorer nos connaissances en psychologie.\n\n#### Informations de base\nAvant toute chose, veuillez entrer votre numéro de téléphone et votre email.\nCes informations sont nécessaires pour que nous puissions automatiquement vous envoyer les questionnaires et d'éventuels rappels.",
                        "label_parsed": "<p>Bienvenue,<\/p>\n<p>Merci d'avoir pris le temps de faire l'entretien avec moi et d'avoir accepté de participer à cette recherche. Votre engagement fait plaisir à voir.<br \/>\nVotre participation rend cette étude possible et c'est grâce à vous et grâce aux autres participants que nous pourrons contribuer à améliorer nos connaissances en psychologie.<\/p>\n<h4>Informations de base<\/h4>\n<p>Avant toute chose, veuillez entrer votre numéro de téléphone et votre email.<br \/>\nCes informations sont nécessaires pour que nous puissions automatiquement vous envoyer les questionnaires et d'éventuels rappels.<\/p>",
                        "optional": 1,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 1
                    },
                    {
                        "type": "email",
                        "choice_list": null,
                        "type_options": null,
                        "name": "email",
                        "label": "Veuillez indiquez votre email",
                        "label_parsed": "Veuillez indiquez votre email",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 2
                    },
                    {
                        "type": "email",
                        "choice_list": null,
                        "type_options": null,
                        "name": "email2",
                        "label": "Veuillez réécrire votre email.",
                        "label_parsed": "Veuillez réécrire votre email.",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 3
                    },
                    {
                        "type": "block",
                        "choice_list": null,
                        "type_options": null,
                        "name": "match_error",
                        "label": "Erreur : vérifier votre email",
                        "label_parsed": "Erreur : vérifier votre email",
                        "optional": 0,
                        "class": "",
                        "showif": "(email2 != \"\" && email != \"\" && email != email2) \/\/js_only",
                        "value": "",
                        "block_order": null,
                        "item_order": 4
                    },
                    {
                        "type": "tel",
                        "choice_list": null,
                        "type_options": null,
                        "name": "telephone",
                        "label": "Numéro de gsm\n <span style=\"color:red\">Format à utiliser : **0032411223344**<\/span>",
                        "label_parsed": "<p>Numéro de gsm<br \/>\n<span style=\"color:red\">Format à utiliser : <strong>0032411223344<\/strong><\/span><\/p>",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 5
                    },
                    {
                        "type": "block",
                        "choice_list": null,
                        "type_options": null,
                        "name": "erreur_tel",
                        "label": "Erreur : votre numéro n'a pas le bon format",
                        "label_parsed": "Erreur : votre numéro n'a pas le bon format",
                        "optional": 0,
                        "class": "",
                        "showif": "(telephone != \"\" && (telephone.toString().length < 11 || telephone.toString().length > 11)) \/\/js_only",
                        "value": "",
                        "block_order": null,
                        "item_order": 6
                    },
                    {
                        "type": "tel",
                        "choice_list": null,
                        "type_options": "13,13, 13",
                        "name": "tel2",
                        "label": "Veuillez réécrire votre numéro de gsm",
                        "label_parsed": "Veuillez réécrire votre numéro de gsm",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 7
                    },
                    {
                        "type": "block",
                        "choice_list": null,
                        "type_options": null,
                        "name": "match_error2",
                        "label": "Erreur : vérifiez votre numéro",
                        "label_parsed": "Erreur : vérifiez votre numéro",
                        "optional": 0,
                        "class": "",
                        "showif": "telephone != tel2 \/\/js_only",
                        "value": "",
                        "block_order": null,
                        "item_order": 8
                    },
                    {
                        "type": "submit",
                        "choice_list": null,
                        "type_options": null,
                        "name": "submit1",
                        "label": "Passer à la suite",
                        "label_parsed": "Passer à la suite",
                        "optional": 0,
                        "class": "",
                        "showif": "telephone == tel2 \/\/js_only",
                        "value": "",
                        "block_order": null,
                        "item_order": 9
                    },
                    {
                        "type": "random",
                        "choice_list": null,
                        "type_options": "1111,9999",
                        "name": "verification_code_sms",
                        "label": "",
                        "label_parsed": "",
                        "optional": 0,
                        "class": "hidden",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 10
                    },
                    {
                        "type": "random",
                        "choice_list": null,
                        "type_options": "1111,9999",
                        "name": "verification_code_mail",
                        "label": "",
                        "label_parsed": "",
                        "optional": 0,
                        "class": "hidden",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 11
                    },
                    {
                        "type": "note",
                        "choice_list": null,
                        "type_options": null,
                        "name": "text",
                        "label": "Veuillez vérifier votre email et votre numéro ci-dessous avant qu'on vous envoie des codes de vérification.",
                        "label_parsed": "Veuillez vérifier votre email et votre numéro ci-dessous avant qu'on vous envoie des codes de vérification.",
                        "optional": 1,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 12
                    },
                    {
                        "type": "email",
                        "choice_list": null,
                        "type_options": null,
                        "name": "email_verif",
                        "label": "",
                        "label_parsed": "",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "email",
                        "block_order": null,
                        "item_order": 13
                    },
                    {
                        "type": "tel",
                        "choice_list": null,
                        "type_options": null,
                        "name": "gsm_verif",
                        "label": "",
                        "label_parsed": "",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "telephone",
                        "block_order": null,
                        "item_order": 14
                    },
                    {
                        "type": "submit",
                        "choice_list": null,
                        "type_options": null,
                        "name": "submit",
                        "label": "Passer à la suite",
                        "label_parsed": "Passer à la suite",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 15
                    }
                ],
                "settings": {
                    "maximum_number_displayed": 5,
                    "displayed_percentage_maximum": 50,
                    "add_percentage_points": 0,
                    "enable_instant_validation": 1,
                    "expire_after": 0,
                    "google_file_id": "1GSEtSb-Sbgg2fWRRJ2lfFG6zTiQDs5nR6Rcf-CM4qNU",
                    "unlinked": 0,
                    "expire_invitation_after": 0,
                    "expire_invitation_grace": 0,
                    "hide_results": 0,
                    "use_paging": 1
                }
            }
        },
        {
            "type": "External",
            "description": "send out sms to verify phone number",
            "position": 2,
            "special": "",
            "external_link": "library(httr)\r\n#------- study checklist\r\n# - check duration of days\r\n# - check number of studies\r\n# - check expiring time of the main survey\r\n\r\n# ===================================\r\n# ========== SMS SETTINGS ===========\r\n# ===================================\r\n\r\nnameRunProject = \"FeRum5xDay\"\r\n\r\n# parameters of SMS gateway\r\nbase        = \"https:\/\/WEBSITE ADRESS HERE\"\r\nrequestUri  = \"REQUEsT URI HERE\"\r\napiKey      = \"API KEY HERE\"\r\ndevice_number = 3\r\n\r\n# ===================================\r\n# ===================================\r\n\r\ntelephone = enrolling_survey$gsm_verif # retrieve the stored phone number, you would use something like survey$mobile_number\r\nsession = survey_run_sessions$session\r\nverif_code = enrolling_survey$verification_code_sms\r\n\r\nbody_message = paste0(\"Voici votre code de vérification pour l'étude\\n\\n\", verif_code,\"\\n\\nVoici un lien pour retourner au questionnaire si nécessaire : https:\/\/\", nameRunProject,\".formr.org\/?code=\", session, \"\\n\")\r\n\r\n\r\nresult <- POST(\r\n  url = base,\r\n  path = requestUri,\r\n  body = list(\r\n    key = apiKey,\r\n    number = telephone,\r\n    message = body_message,\r\n    devices = device_number\r\n  ),\r\n  encode = \"form\",\r\n  verbose(),\r\n  config = httr::config(connecttimeout = 120)\r\n)\r\n(result2 = content(result))\r\n\r\nif(is.null(result2$error_code)) { FALSE } else { TRUE }",
            "api_end": 0,
            "expire_after": 0
        },
        {
            "type": "Email",
            "description": "Send mail to verify email address",
            "position": 3,
            "special": "",
            "account_id": 745,
            "subject": "Confirmez votre adresse mail pour l'étude",
            "recipient_field": "enrolling_survey$email_verif",
            "body": "Votre code de vérification est :\r\n`r enrolling_survey$verification_code_mail`\r\n\r\nSi vous devez retourner sur le questionnaire, voici un lien :\r\n{{login_link}}"
        },
        {
            "type": "Survey",
            "description": "survey_confirmation_mail & gsm",
            "position": 4,
            "special": "",
            "survey_data": {
                "name": "confirmation_mail_sms",
                "items": [
                    {
                        "type": "hidden",
                        "choice_list": null,
                        "type_options": null,
                        "name": "verification_code_sms",
                        "label": "",
                        "label_parsed": "",
                        "optional": 1,
                        "class": "",
                        "showif": "",
                        "value": "enrolling_survey$verification_code_sms",
                        "block_order": null,
                        "item_order": 1
                    },
                    {
                        "type": "note",
                        "choice_list": null,
                        "type_options": null,
                        "name": "note",
                        "label": "Veuillez confirmer votre numéro de gsm en entrant le code qui se trouve dans le sms reçu.",
                        "label_parsed": "Veuillez confirmer votre numéro de gsm en entrant le code qui se trouve dans le sms reçu.",
                        "optional": 1,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 2
                    },
                    {
                        "type": "text",
                        "choice_list": null,
                        "type_options": null,
                        "name": "verification_code_match_sms",
                        "label": "#### Entrer le code reçu ici",
                        "label_parsed": "<h4>Entrer le code reçu ici<\/h4>",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 3
                    },
                    {
                        "type": "block",
                        "choice_list": null,
                        "type_options": null,
                        "name": "match_error",
                        "label": "Le code que vous avez entré n'est pas le bon code",
                        "label_parsed": "Le code que vous avez entré n'est pas le bon code",
                        "optional": 0,
                        "class": "",
                        "showif": "verification_code_match_sms !=\"\" && verification_code_match_sms != verification_code_sms \/\/js_only",
                        "value": "",
                        "block_order": null,
                        "item_order": 4
                    },
                    {
                        "type": "hidden",
                        "choice_list": null,
                        "type_options": null,
                        "name": "verification_code",
                        "label": "",
                        "label_parsed": "",
                        "optional": 1,
                        "class": "",
                        "showif": "",
                        "value": "enrolling_survey$verification_code_mail",
                        "block_order": null,
                        "item_order": 5
                    },
                    {
                        "type": "note",
                        "choice_list": null,
                        "type_options": null,
                        "name": "note2",
                        "label": "Veuillez confirmer votre adresse mail en entrant le code qui se trouve dans l'email que vous avez reçu.",
                        "label_parsed": "Veuillez confirmer votre adresse mail en entrant le code qui se trouve dans l'email que vous avez reçu.",
                        "optional": 1,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 6
                    },
                    {
                        "type": "text",
                        "choice_list": null,
                        "type_options": null,
                        "name": "verification_code_match",
                        "label": "#### Entrer le code reçu ici",
                        "label_parsed": "<h4>Entrer le code reçu ici<\/h4>",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 7
                    },
                    {
                        "type": "block",
                        "choice_list": null,
                        "type_options": null,
                        "name": "match_error_2",
                        "label": "Le code que vous avez entré n'est pas le bon code",
                        "label_parsed": "Le code que vous avez entré n'est pas le bon code",
                        "optional": 0,
                        "class": "",
                        "showif": "verification_code_match != \"\" && verification_code_match != verification_code \/\/js_only",
                        "value": "",
                        "block_order": null,
                        "item_order": 8
                    },
                    {
                        "type": "submit",
                        "choice_list": null,
                        "type_options": null,
                        "name": "mail_confirmation",
                        "label": "Je confirme mon email et mon numéro de gsm",
                        "label_parsed": "Je confirme mon email et mon numéro de gsm",
                        "optional": 0,
                        "class": "",
                        "showif": "verification_code_match == verification_code && verification_code_match_sms == verification_code_sms",
                        "value": "",
                        "block_order": null,
                        "item_order": 9
                    }
                ],
                "settings": {
                    "maximum_number_displayed": 0,
                    "displayed_percentage_maximum": 100,
                    "add_percentage_points": 0,
                    "enable_instant_validation": 0,
                    "expire_after": 0,
                    "google_file_id": "1wV6D8fFtn4Z5QVt9Y7cQW62o8OQuAS5kbPfOZ3X69SA",
                    "unlinked": 0,
                    "expire_invitation_after": 0,
                    "expire_invitation_grace": 0,
                    "hide_results": 0,
                    "use_paging": 0
                }
            }
        },
        {
            "type": "SkipForward",
            "description": "If the person hasn't confirmed in time (90 minutes), skip to end so they can logout and redo it if they want to",
            "position": 5,
            "special": "",
            "condition": "library(lubridate)\r\ntime_passed(minutes = 90)",
            "if_true": 310
        },
        {
            "type": "Survey",
            "description": "Demographics survey",
            "position": 10,
            "special": "",
            "survey_data": {
                "name": "demographics",
                "items": [
                    {
                        "type": "note",
                        "choice_list": null,
                        "type_options": null,
                        "name": "Intro",
                        "label": "Merci d'avoir confirmé votre email et votre numéro de téléphone.\nVeuillez remplir les quelques informations suivantes.",
                        "label_parsed": "<p>Merci d'avoir confirmé votre email et votre numéro de téléphone.<br \/>\nVeuillez remplir les quelques informations suivantes.<\/p>",
                        "optional": 1,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 1
                    },
                    {
                        "type": "mc",
                        "choice_list": "sex",
                        "type_options": null,
                        "name": "sex",
                        "label": "Votre genre",
                        "label_parsed": "Votre genre",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 2,
                        "choices": {
                            "1": "homme",
                            "2": "femme",
                            "3": "non-binaire"
                        }
                    },
                    {
                        "type": "year",
                        "choice_list": null,
                        "type_options": null,
                        "name": "birthyear",
                        "label": "Année de naissance",
                        "label_parsed": "Année de naissance",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 3
                    },
                    {
                        "type": "text",
                        "choice_list": null,
                        "type_options": 8,
                        "name": "code_anonyme",
                        "label": "Afin de garantir votre anonymat, vos réponses seront associées à un code correspondant aux initiales du prénom de votre maman et du prénom de votre papa suivies de votre date de naissance en 6 chiffres.    \n\nEx: La maman de Marie s'appelle Nathalie, son papa s'appelle Thibault. Marie est née le 16 juin 1986, le code sera NT160686 .    \n\nIndiquez les initiales du prénom de votre maman et du prénom de votre papa suivies de votre date de naissance en 6 chiffres (jour\/mois\/annee), le tout attaché et sans espaces comme dans l'exemple.",
                        "label_parsed": "<p>Afin de garantir votre anonymat, vos réponses seront associées à un code correspondant aux initiales du prénom de votre maman et du prénom de votre papa suivies de votre date de naissance en 6 chiffres.    <\/p>\n<p>Ex: La maman de Marie s'appelle Nathalie, son papa s'appelle Thibault. Marie est née le 16 juin 1986, le code sera NT160686 .    <\/p>\n<p>Indiquez les initiales du prénom de votre maman et du prénom de votre papa suivies de votre date de naissance en 6 chiffres (jour\/mois\/annee), le tout attaché et sans espaces comme dans l'exemple.<\/p>",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 4
                    },
                    {
                        "type": "select_or_add_one",
                        "choice_list": "mother_tongue",
                        "type_options": null,
                        "name": "mother_tongue",
                        "label": "Quelle est votre langue maternelle?\nCelle que vous utilisez le plus souvent.",
                        "label_parsed": "<p>Quelle est votre langue maternelle?<br \/>\nCelle que vous utilisez le plus souvent.<\/p>",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 5,
                        "choices": {
                            "1": "Français",
                            "2": "Néerlandais",
                            "3": "Allemand",
                            "4": "Italien",
                            "5": "Espagnol",
                            "6": "Russe",
                            "7": "Polonais",
                            "8": "Portugais",
                            "9": "Anglais",
                            "10": "Ukranien",
                            "11": "Roumain",
                            "12": "Chinois"
                        }
                    },
                    {
                        "type": "select_or_add_multiple",
                        "choice_list": "other_languages",
                        "type_options": null,
                        "name": "other_languages",
                        "label": "Quelles autres langues parlez-vous couramment?",
                        "label_parsed": "Quelles autres langues parlez-vous couramment?",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 6,
                        "choices": {
                            "1": "Français",
                            "2": "Néerlandais",
                            "3": "Allemand",
                            "4": "Italien",
                            "5": "Espagnol",
                            "6": "Russe",
                            "7": "Polonais",
                            "8": "Portugais",
                            "9": "Anglais",
                            "10": "Ukranien",
                            "11": "Roumain",
                            "12": "Chinois"
                        }
                    },
                    {
                        "type": "number",
                        "choice_list": null,
                        "type_options": "0,32,1",
                        "name": "years_of_studies",
                        "label": "Combien d'années d'éducation formelle avez-vous réalisées?\nIndiquez le nombre d'études en comptant à partir des secondaires.\nExemple: 6 années de secondaire + 3 années de bacheliers\/haute école + 1 année de master = 10",
                        "label_parsed": "<p>Combien d'années d'éducation formelle avez-vous réalisées?<br \/>\nIndiquez le nombre d'études en comptant à partir des secondaires.<br \/>\nExemple: 6 années de secondaire + 3 années de bacheliers\/haute école + 1 année de master = 10<\/p>",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 7
                    },
                    {
                        "type": "mc",
                        "choice_list": "occupation",
                        "type_options": null,
                        "name": "occupation",
                        "label": "Quelle est votre occupation principale?",
                        "label_parsed": "Quelle est votre occupation principale?",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 8,
                        "choices": {
                            "1": "Employé",
                            "2": "Indépendant",
                            "3": "Etudiant",
                            "4": "Au chomage",
                            "5": "Doctorant",
                            "6": "Autre"
                        }
                    },
                    {
                        "type": "select_or_add_one",
                        "choice_list": "country_living",
                        "type_options": null,
                        "name": "country_living",
                        "label": "Dans quel pays vivez-vous actuellement?",
                        "label_parsed": "Dans quel pays vivez-vous actuellement?",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 9,
                        "choices": {
                            "1": "Belgique",
                            "2": "France",
                            "3": "Pays-Bas",
                            "4": "Allemagne",
                            "5": "Espagne",
                            "6": "Italie",
                            "7": "Angleterre",
                            "8": "Suisse",
                            "9": "Pologne"
                        }
                    },
                    {
                        "type": "note",
                        "choice_list": null,
                        "type_options": null,
                        "name": "reread",
                        "label": "**Vérifiez que vous ayez bien répondu à tout avant de soumettre.**",
                        "label_parsed": "<strong>Vérifiez que vous ayez bien répondu à tout avant de soumettre.<\/strong>",
                        "optional": 1,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 10
                    },
                    {
                        "type": "submit",
                        "choice_list": null,
                        "type_options": null,
                        "name": "submit2",
                        "label": "Envoyer le questionnaire",
                        "label_parsed": "Envoyer le questionnaire",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 11
                    }
                ],
                "settings": {
                    "maximum_number_displayed": 0,
                    "displayed_percentage_maximum": 100,
                    "add_percentage_points": 0,
                    "enable_instant_validation": 1,
                    "expire_after": 0,
                    "google_file_id": "1b5CvMhjfUGTISQ8OJvupQE0rHymeGQWCSSV8E9SogtU",
                    "unlinked": 0,
                    "expire_invitation_after": 0,
                    "expire_invitation_grace": 0,
                    "hide_results": 0,
                    "use_paging": 1
                }
            }
        },
        {
            "type": "SkipForward",
            "description": "If enough rows have passed, then skip to end",
            "position": 195,
            "special": "",
            "condition": "# repeat till the maximum number of surveys has been achieved\r\nlibrary(dplyr)\r\nlibrary(lubridate)\r\n\r\n# ===================================\r\n# ====== define all variables =======\r\n# ===================================\r\n\r\ndays_duration_study = 14\r\nsurveys_by_day      = 4\r\ntimezone            = \"CET\"\r\nto_day              = today(timezone)\r\nnow_date            = now(timezone)\r\nt_zero              = \"00:05\"\r\nlast_timepoint      = \"23:30\"\r\ntimepoints          = c(\"09:00\", \"13:00\",\"17:00\",\"21:00\")  # write just the hours\r\nESM_questionnaire   = EF_RUM_ESM_v2\r\n\r\n# ===================================\r\n# ===================================\r\n\r\n\r\nmax_surveys = surveys_by_day * days_duration_study\r\n\r\nif(!exists(\"ESM_questionnaire\")){\r\ndays = ESM_questionnaire %>% mutate(day = as.Date(created)) %>% summarize(n_days = n_distinct(day))\r\n\r\ndays$n_days >= days_duration_study } else { FALSE }\r\n",
            "if_true": 300
        },
        {
            "type": "Pause",
            "description": "Pause till start of the study the next day",
            "position": 200,
            "special": "",
            "wait_until_time": "",
            "wait_until_date": "",
            "wait_minutes": "",
            "relative_to": "library(lubridate)\r\nnext_day()\r\n",
            "body": "```{r, include=FALSE, echo=FALSE, warning=FALSE, message=FALSE}\r\nlibrary(dplyr)\r\nlibrary(lubridate)\r\n# ===================================\r\n# ====== define all variables =======\r\n# ===================================\r\n\r\ndays_duration_study = 14\r\nsurveys_by_day      = 4\r\ntimezone            = \"CET\"\r\nto_day              = today(timezone)\r\nnow_date            = now(timezone)\r\nt_zero              = \"00:05\"\r\nlast_timepoint      = \"23:30\"\r\ntimepoints          = c(\"09:00\", \"13:00\",\"17:00\",\"21:00\")  # write just the hours\r\nESM_questionnaire   = EF_RUM_ESM_v2\r\n\r\n# ===================================\r\n# ===================================\r\n\r\n# ===================================\r\n# ===================================\r\n\r\nmax_surveys = surveys_by_day * days_duration_study\r\ndays_done = 0\r\ntext = \"\"\r\n# ====================================\r\n# == first check whether they enrolled into the study\r\n# ====================================\r\n\r\nif(!exists(\"ESM_questionnaire\") || nrow(ESM_questionnaire) == 0){ text = paste0(\"Votre adresse mail et votre numéro de gsm ont été confirmés. Cela nous permet d'être sûrs que vous recevrez les rappels par sms et mail pour remplir les questionnaires. \") } else {\r\n\r\n# ====================================\r\n# == option 2 : they already started the started\r\n# ====================================\r\n\r\n\r\n# lets check how many questionnaires they filled\r\nNsurv_filled_today    = ESM_questionnaire %>% select(ended) %>% filter(!is.na(ended)) %>% mutate(ended = as.Date(ended)) %>% filter(ended == to_day) %>%  nrow()\r\n\r\nprint(Nsurv_filled_today)\r\n\r\ndate_start = as.Date(enrolling_survey$created)\r\n\r\nlast_day_study = as.Date(enrolling_survey$created)+ days(days_duration_study)\r\n\r\n# get the numbers of day left\r\ndays_left = last_day_study - today()\r\n# difftime(df$datevar1 ,df$datevar2 , units = c(\"days\"))\r\n\r\ndays_done = days_duration_study - days_left\r\n\r\nif(!is.na(Nsurv_filled_today)){\r\ncompletion_rate = Nsurv_filled_today\/surveys_by_day * 100\r\n} else {\r\n    completion_rate = 0\r\n}\r\nif(completion_rate >= 70) {\r\n    text = paste0(\"Aujourd'hui, vous aviez un taux de réponse de \", completion_rate,\"% ! C'est vraiment super, merci de prendre cette recherche au sérieux.\")\r\n} else if(completion_rate <= 30){\r\n    text = paste0(text, \"On constate que vous n'avez répondu qu'à un questionnaire aujourd'hui. N'hésitez pas à me contacter (yorgo.hoebeke@uclouvain.be) en cas de problème ou de difficultés avec l'étude\")\r\n} else {\r\n    text = \"\"\r\n}\r\n\r\n# !! insérer une image joyeuse\r\n\r\n}\r\n\r\n# create intermittent reinforcement messages\r\nreinforcement = \"\"\r\nd = days_done + 1\r\nreinforcement <- switch(d,\r\n\"0\" = \"### Merci pour votre participation!\",\r\n\"1\" = \"Merci pour votre participation ! N’hésitez pas à nous faire part des éventuelles difficultés que vous pourriez rencontrer dans la complétion des questionnaires ou dans la participation à cette étude : yorgo.hoebeke@uclouvain.be\",\r\n\"2\" = \"### Merci pour votre participation!\",\r\n\"3\" = \"### Merci pour votre participation!\",\r\n\"4\" = \"Déjà 4 jours!\r\n\\n\\n\r\nNous tenons à vous remercier et vous encourager à continuer. Aussi simple que cela puisse paraitre, chaque réponse que vous apportez améliore la qualité de cette étude, aide à mieux comprendre nos pensées au quotidien et surtout contribue à faire avancer la recherche en psychologie. Merci pour votre implication tout au long de ces quatre jours.\r\n\\n\\n\r\nPar ailleurs, n’hésitez surtout pas à nous communiquer vos interrogations ou vos soucis à propos des questionnaires ( yorgo.hoebeke@uclouvain.be ). Cette étude est unique en son genre; votre participation l’est également.\",\r\n\"5\" = \"### Merci pour votre participation!\",\r\n\"6\" = \"### Merci pour votre participation!\",\r\n\"7\" = \"### Merci pour votre participation!\",\r\n\"8\" = \"C’est remarquable. Vous avez réalisé plus de la moitié de l'étude ! Votre vécu et votre implication dans cette recherche permettent directement d’accroître la qualité de cette recherche. Merci pour votre implication !\",\r\n\"9\" = \"### Merci pour votre participation!\",\r\n\"10\" = \"### Merci pour votre participation!\",\r\n\"11\" = \"Plus que 3 jours, c'est la dernière ligne droite ! Chaque réponse compte et nous permet de rendre nos analyses statistiques plus fiables.\",\r\n\"12\" = \"### Merci pour votre participation!\",\r\n\"13\" = \"La fin de l'étude est proche, plus qu'un jour!\",\r\n\"14\" = \"### Merci pour votre participation!\",)\r\n\r\n# let's create a progress visual\r\n\r\nprogress = \"\"\r\nfor(i in 1:days_duration_study) {\r\n  if(i <= days_done) {\r\n  progress = paste0(progress, \"\\n### <span style='color:green;display:inline-block; width:95px;'>**Jour** **\",i,\"**<\/span> ![](https:\/\/i.imgur.com\/nUY7Ifu.png){width=50px}\\n\")\r\n  } else if (i > days_done) {\r\n  progress = paste0(progress, \"\\n### <span style='color:darkgray;display:inline-block;width:95px;'>**Jour** **\",i,\"**<\/span> ![](https:\/\/i.imgur.com\/5OY8PC6.png){width=50px}\\n\")\r\n  }\r\n  \r\n}\r\n\r\n```\r\n\r\n***\r\n\r\n`r reinforcement`\r\n<br>\r\n\r\n`r text`\r\n\r\n***\r\n\r\nDemain, vous recevrez une invitation par sms pour remplir le questionnaire à `r paste(timepoints, sep=\", \")`.\r\n\r\nVous aurez à chaque fois **2h maximum** pour y répondre. Cependant, essayez d'y répondre le plus vite possible.\r\n\r\nVous recevrez 1 rappel par *sms* une heure après la première notification.\r\n\r\nA demain!\r\n\r\n***\r\n\r\n### Votre progression :\r\n`r progress`\r\n\r\n***\r\n\r\n\r\n\r\n\r\n\r\n\r\nVous pouvez fermer cette page maintenant.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"
        },
        {
            "type": "SkipForward",
            "description": "Check if it's later than 23:00 or if it's already the last day (just in case)",
            "position": 206,
            "special": "",
            "condition": "library(dplyr)\r\nlibrary(lubridate)\r\n\r\n# ===================================\r\n# ====== define all variables =======\r\n# ===================================\r\n\r\ndays_duration_study = 14\r\nsurveys_by_day      = 4\r\ntimezone            = \"CET\"\r\nto_day              = today(timezone)\r\nnow_date            = now(timezone)\r\nt_zero              = \"00:05\"\r\nlast_timepoint      = \"23:30\"\r\ntimepoints          = c(\"09:00\", \"13:00\",\"17:00\",\"21:00\")  # write just the hours\r\n\r\n# ===================================\r\n# ===================================\r\n\r\n\r\nmax_surveys = surveys_by_day * days_duration_study\r\n\r\n\r\ndate_start = as.Date(enrolling_survey$created)\r\nlast_day_study = as.Date(enrolling_survey$created)+ days(days_duration_study)\r\n\r\ntoday() > last_day_study || now_date > force_tz(today(tz = timezone) + hm(last(timepoints)), tzone = timezone)",
            "if_true": 270
        },
        {
            "type": "Pause",
            "description": "Send 5 questionnaires daily",
            "position": 210,
            "special": "",
            "wait_until_time": "",
            "wait_until_date": "",
            "wait_minutes": 0,
            "relative_to": "library(lubridate)\r\nlibrary(hms)\r\n# ===================================\r\n# ====== define all variables =======\r\n# ===================================\r\n\r\ndays_duration_study = 14\r\nsurveys_by_day      = 4\r\ntimezone            = \"CET\"\r\nto_day              = today(timezone)\r\nnow_date            = now(timezone)\r\nt_zero              = \"00:05\"\r\nlast_timepoint      = \"23:30\"\r\ntimepoints          = c(\"09:00\", \"13:00\",\"17:00\",\"21:00\")  # write just the hours\r\n\r\n# ===================================\r\n# ===================================\r\n\r\n\r\nt1 = force_tz(today(\"CET\") + hm(timepoints[1]), tzone = timezone)\r\nt2 = force_tz(to_day + hm(timepoints[2]), tzone = timezone)\r\nt3 = force_tz(to_day + hm(timepoints[3]), tzone = timezone)\r\nt4 = force_tz(to_day + hm(timepoints[4]), tzone = timezone)\r\n\r\n# calculer quand le questionnaire sera envoyé ensuite\r\ntime = \"\"\r\n\r\nif(now_date < t1) { \r\ntime = t1\r\n} else if(now_date < t2) { \r\ntime = t2\r\n} else if(now_date < t3) { \r\ntime = t3\r\n} else if(now_date < t4) { \r\ntime = t4\r\n}\r\n\r\nas_hms(time)",
            "body": "```{r, include=FALSE, warning = FALSE, message=FALSE, echo=TRUE}\r\nlibrary(lubridate)\r\nlibrary(hms)\r\nlibrary(dplyr)\r\n# ===================================\r\n# ====== define all variables =======\r\n# ===================================\r\n\r\ndays_duration_study = 14\r\nsurveys_by_day      = 4\r\ntimezone            = \"CET\"\r\nto_day              = today(timezone)\r\nnow_date            = now(timezone)\r\nt_zero              = \"00:05\"\r\nlast_timepoint      = \"23:30\"\r\ntimepoints          = c(\"09:00\", \"13:00\",\"17:00\",\"21:00\")  # write just the hours\r\nESM_questionnaire   = EF_RUM_ESM_v2\r\n\r\n# ===================================\r\n# ===================================\r\n\r\nto_day = today(timezone)\r\nnow_date = now(timezone)\r\nt_end = force_tz(to_day + hm(last_timepoint), tzone = timezone)\r\n\r\nt = c()\r\n# create as many timepoints as needed\r\nfor(i in 1:length(timepoints)){\r\n  t[i] = as.character(force_tz(to_day + hm(timepoints[i])), tzone = timezone)\r\n}\r\n\r\n# create the interval list\r\nintervals_list = list()\r\nfor(i in 1:length(t)){\r\n  if(i == length(t)){\r\n    intervals_list = c(intervals_list, list(interval(ymd_hms(t[i], tz = timezone),ymd_hms(t_end,  tz = timezone))))\r\n  } else {\r\n    intervals_list = c(intervals_list, list(interval(ymd_hms(t[i], tz = timezone),ymd_hms(t[i+1],  tz = timezone))))\r\n\r\n  }\r\n}\r\n\r\n# ===================================================================\r\n# 1) get the dates of ESM_questionnaire$created with dplyr::pull(aframe, a2)\r\n\r\n\r\nif(nrow(ESM_questionnaire) > 0 ){\r\n  entries_of_today = force_tz(ymd_hms(ESM_questionnaire %>% select(\"ended\") %>% filter(ended == today()) %>% pull(ended)), tzone = timezone) \r\n} else {\r\n  entries_of_today = NULL\r\n}\r\n\r\n\r\n# depending on the time check whether the questionnaires have been skipped or not.\r\nnow()\r\n\r\ne = 0\r\nprogress = \"\"\r\ntext = \"\"\r\n# == T0 == si on il n'est pas encore l'heure, attendre\r\nfor(i in 1:length(t)){\r\n  if(now_date < t[i] ){\r\n    # if here, it means that it hasn't been answered yet\r\n      progress = paste0(progress, \"\\n#### <span style='color:darkgray'>**\",format(strptime(t[i],\"%Y-%m-%d %H:%M:%S\"), \"%H:%M\"),\"**<\/span> ![](https:\/\/i.imgur.com\/xuosH6S.png){width=40px}\\n\")\r\n    \r\n    if( i == e ){\r\n        \r\n        text = paste0(\"#### Merci beaucoup pour vos réponses!\\n\\nVous recevrez votre prochain questionnaire à \", format(strptime(t[i],\"%Y-%m-%d %H:%M:%S\"), \"%H:%M\"),\".\\n\\nA tout à l'heure.\" )\r\n        print(text) \r\n      } \r\n      \r\n    # if it's the time of the day\r\n      if( i == 1 ){\r\n        text = paste0(\"Bonjour, il est encore trop tôt!\\n\\nVous recevrez votre prochain questionnaire à \", format(strptime(t[i],\"%Y-%m-%d %H:%M:%S\"), \"%H:%M\"),\". \\n\\nA tout à l'heure.\" )\r\n        print(text)\r\n      } \r\n  } else {\r\n    e = i+1\r\n    \r\n    # so the time point has passed\r\n    # test whether the participant answered the survey\r\n    \r\n    if(!is.null(entries_of_today)){\r\n      if(any(entries_of_today %within% intervals_list[i])) {\r\n        # if TRUE, SHOW GREEN PICTURE\r\n        progress = paste0(progress, \"\\n#### <span style='color:green'>**\", format(strptime(t[i],\"%Y-%m-%d %H:%M:%S\"), \"%H:%M\"),\"**<\/span> ![](https:\/\/i.imgur.com\/nUY7Ifu.png){width=40px}\\n\")\r\n      } else {\r\n        # if FALSE, SHOW RED PICTURE\r\n        progress = paste0(progress, \"\\n#### <span style='color:red'>**\", format(strptime(t[i],\"%Y-%m-%d %H:%M:%S\"), \"%H:%M\"),\"**<\/span> ![](https:\/\/i.imgur.com\/d8RGdld.png){width=40px}\\n\")\r\n      }\r\n    } else {\r\n      # if FALSE, SHOW RED PICTURE\r\n      progress = paste0(progress, \"\\n#### <span style='color:red'>**\", format(strptime(t[i],\"%Y-%m-%d %H:%M:%S\"), \"%H:%M\"),\"**<\/span> ![](https:\/\/i.imgur.com\/d8RGdld.png){width=40px}\\n\")\r\n    }\r\n  }\r\n}\r\n\r\n```\r\n\r\n***\r\n\r\n`r text`\r\n\r\n***\r\n\r\n#### Votre progression aujourd'hui\r\n\r\n`r progress`"
        },
        {
            "type": "External",
            "description": "SMS notification",
            "position": 230,
            "special": "",
            "external_link": "library(httr)\r\n\r\n# ===================================\r\n# ========== SMS SETTINGS ===========\r\n# ===================================\r\n\r\nnameRunProject = \"FeRum5xDay\"\r\n\r\n# parameters of SMS gateway\r\nbase        = \"https:\/\/WEBSITE URL\"\r\nrequestUri  = \"REQUEST URI\"\r\napiKey      = \"API KEY\"\r\ndevice_number = 3\r\n\r\n# ===================================\r\n# ===================================\r\n\r\ntelephone = enrolling_survey$telephone # retrieve the stored phone number, you would use something like survey$mobile_number\r\nsession = survey_run_sessions$session\r\n\r\nbody_message = paste0(\"Bonjour,\\nVoici le lien pour répondre au questionnaire: https:\/\/\", nameRunProject,\".formr.org\/?code=\", session, \"\\nRépondez-y au plus vite.\\nD'avance un tout grand merci.\\nYorgo H.\")\r\n\r\n\r\nresult <- POST(\r\n  url = base,\r\n  path = requestUri,\r\n  body = list(\r\n    key = apiKey,\r\n    number = telephone,\r\n    message = body_message,\r\n    devices = device_number\r\n  ),\r\n  encode = \"form\",\r\n  verbose(),\r\n  config = httr::config(connecttimeout = 120)\r\n)\r\n(result2 = content(result))\r\n\r\nif(is.null(result2$error_code)) { FALSE } else { TRUE }",
            "api_end": 0,
            "expire_after": 0
        },
        {
            "type": "Wait",
            "description": "Rappel 1 après 60 minutes si la personne n'a pas encore répondue",
            "position": 231,
            "special": "",
            "wait_until_time": "",
            "wait_until_date": "",
            "wait_minutes": 59,
            "relative_to": "",
            "body": 245
        },
        {
            "type": "External",
            "description": "SMS rappel 1",
            "position": 232,
            "special": "",
            "external_link": "library(httr)\r\n\r\n# ===================================\r\n# ========== SMS SETTINGS ===========\r\n# ===================================\r\n\r\nnameRunProject = \"FeRum5xDay\"\r\n\r\n# parameters of SMS gateway\r\nbase        = \"https:\/\/WEBSITE URL\"\r\nrequestUri  = \"REQUEST URI\"\r\napiKey      = \"PUT YOUR API KEY HERE\"\r\ndevice_number = 3\r\n\r\n# ===================================\r\n# ===================================\r\n\r\ntelephone = enrolling_survey$telephone # retrieve the stored phone number, you would use something like survey$mobile_number\r\nsession = survey_run_sessions$session\r\nnameRunProject = \"FeRum5xDay\"\r\n\r\nbody_message = paste0(\"RAPPEL: veuillez ne pas oublier de répondre au questionnaire.\\n\\nVoici le lien pour répondre au questionnaire : https:\/\/\", nameRunProject,\".formr.org\/?code=\", session, \"\\nIl vous reste 60 min pour y répondre.\\nD'avance un tout grand merci.\\nYorgo H.\")\r\n\r\nresult <- POST(\r\n  url = base,\r\n  path = requestUri,\r\n  body = list(\r\n    key = apiKey,\r\n    number = telephone,\r\n    message = body_message,\r\n    devices = device_number\r\n  ),\r\n  encode = \"form\",\r\n  verbose(),\r\n  config = httr::config(connecttimeout = 120)\r\n)\r\n(result2 = content(result))\r\n\r\nif(is.null(result2$error_code)) { FALSE } else { TRUE }",
            "api_end": 0,
            "expire_after": 0
        },
        {
            "type": "Survey",
            "description": "Daily questionnaire of FE, RNT, and RRS (the survey expires after 90 minutes)",
            "position": 245,
            "special": "",
            "survey_data": {
                "name": "EF_RUM_ESM_v2",
                "items": [
                    {
                        "type": "note",
                        "choice_list": null,
                        "type_options": null,
                        "name": "introduction",
                        "label": "```{r, include=FALSE, warning = FALSE, message=FALSE, echo=FALSE}\nlibrary(lubridate)\nlibrary(hms)\n\ndays_duration_study = 14\nsurveys_by_day      = 4\ntimezone            = \"CET\"\nto_day              = today(timezone)\nnow_date            = now(timezone)\nt_zero              = \"00:05\"\nlast_timepoint      = \"23:30\"\ntimepoints          = c(\"09:00\",\"13:00\",\"17:00\",\"21:00\")\nESM_questionnaire   = EF_RUM_ESM_v2\n\nt1 = force_tz(to_day + hm(timepoints[1]), tzone = timezone)\nt2 = force_tz(to_day + hm(timepoints[2]), tzone = timezone)\nt3 = force_tz(to_day + hm(timepoints[3]), tzone = timezone)\nt4 = force_tz(to_day + hm(timepoints[4]), tzone = timezone)\n\ntime = \"\"\n\nif(now_date < t1) { \ntext_consigne = \"Depuis votre réveil...\"\n} else if(now_date < t2) { \ntext_consigne = \"Depuis votre réveil...\"\n} else if(now_date < t3) { \ntext_consigne = paste0(\"Depuis le précédent questionnaire (\", timepoints[1], \")...\")\n} else if(now_date < t4) { \ntext_consigne = paste0(\"Depuis le précédent questionnaire (\", timepoints[2], \")...\")\n} else if(now_date > t4) { \ntext_consigne = paste0(\"Depuis le précédent questionnaire (\", timepoints[3], \")...\")\n} \n\nNday <- nrow(ESM_questionnaire)\n if(Nday == 1){ text <- \"Voici votre premier questionnaire quotidien. \\n Sachez qu'il n’y a pas de bonne ou de mauvaise réponse. C’est votre expérience et uniquement celle-ci qui nous intéresse. Pour rappel, votre participation est totalement anonyme.\" } else {\n   text = \"\\n \\n\"\n }\n\n\n ```\n\n### Bonjour `r knitr::asis_output(\"\\U1F44B\")` !\n`r text`\n\n`r knitr::asis_output(\"\\U23F3\")` Prenez quelques instants pour vous, pour réfléchir aux heures qui se sont écoulées et répondre à ces questions.\n\n**`r text_consigne`**",
                        "label_parsed": null,
                        "optional": 1,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 1
                    },
                    {
                        "type": "range",
                        "choice_list": "perseverance",
                        "type_options": "0,100,1",
                        "name": "perseverance",
                        "label": "<div class=\"tooltip\">\nA quel point avez-vous passé du temps à penser à une ou plusieurs expériences émotionnelles ?\n<span class=\"tooltiptext\">Cette question se réfère à combien de temps vous étiez pris dans vos pensées, soit à penser à des émotions, à des problèmes, ou quelque chose qui vous est arrivé, plutôt que d'être absorbé par ce que vous faisiez.<\/span>\n<\/div>",
                        "label_parsed": "<div class=\"tooltip\">\nA quel point avez-vous passé du temps à penser à une ou plusieurs expériences émotionnelles ?\n<span class=\"tooltiptext\">Cette question se réfère à combien de temps vous étiez pris dans vos pensées, soit à penser à des émotions, à des problèmes, ou quelque chose qui vous est arrivé, plutôt que d'être absorbé par ce que vous faisiez.<\/span>\n<\/div>",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 3,
                        "choices": {
                            "1": "A aucun moment",
                            "2": "Tout le temps"
                        }
                    },
                    {
                        "type": "range",
                        "choice_list": "negativity",
                        "type_options": "0,100,1",
                        "name": "negativity",
                        "label": "<div class=\"tooltip\">\nA quel point vos pensées ont-elles été négatives ?\n<span class=\"tooltiptext\">Se réfère au contenu de vos pensées: par exemple une situation négative, des événements négatifs, un mauvais souvenir, des sensations désagréables, des pensées décourageantes, des pensées par rapport à des émotions négatives (stress important, anxiété, colère)...<\/span>\n<\/div>",
                        "label_parsed": "<div class=\"tooltip\">\nA quel point vos pensées ont-elles été négatives ?\n<span class=\"tooltiptext\">Se réfère au contenu de vos pensées: par exemple une situation négative, des événements négatifs, un mauvais souvenir, des sensations désagréables, des pensées décourageantes, des pensées par rapport à des émotions négatives (stress important, anxiété, colère)...<\/span>\n<\/div>",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 3,
                        "choices": {
                            "1": "Pas du tout négatives",
                            "2": "Extrêmement négatives"
                        }
                    },
                    {
                        "type": "range",
                        "choice_list": "criticism",
                        "type_options": "0,100,1",
                        "name": "criticism",
                        "label": "<div class=\"tooltip\">\nA quel point vos pensées ont-elles été critiques envers vous-même ?\n<span class=\"tooltiptext\">On parle ici \"d'auto-critique\". Cela se réfère donc à des pensées envers vous-même lorsque : vous êtes mécontent de ce que vous faites ou comment vous agissez, mécontent de qui vous êtes, lorsque vous vous mettez des objectifs mais que vous vous critiquez si vous ne les atteignez pas... &#013; &#013;\nA l'inverse, des pensées non critiques envers vous-mêmes sont des encouragements, de la compassion envers vous-même, un discours positif (p. ex., \"je n'y suis pas arrivé maintenant mais je finirai pas y arriver\".)<\/span>\n<\/div>",
                        "label_parsed": "<div class=\"tooltip\">\nA quel point vos pensées ont-elles été critiques envers vous-même ?\n<span class=\"tooltiptext\">On parle ici \"d'auto-critique\". Cela se réfère donc à des pensées envers vous-même lorsque : vous êtes mécontent de ce que vous faites ou comment vous agissez, mécontent de qui vous êtes, lorsque vous vous mettez des objectifs mais que vous vous critiquez si vous ne les atteignez pas... \r \r\nA l'inverse, des pensées non critiques envers vous-mêmes sont des encouragements, de la compassion envers vous-même, un discours positif (p. ex., \"je n'y suis pas arrivé maintenant mais je finirai pas y arriver\".)<\/span>\n<\/div>",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 3,
                        "choices": {
                            "1": "Pas du tout critiques",
                            "2": "Extrêmement critiques"
                        }
                    },
                    {
                        "type": "range",
                        "choice_list": "brooding",
                        "type_options": "0,100,1",
                        "name": "brooding",
                        "label": "<div class=\"tooltip\">\nDans quelle mesure avez-vous pensé aux causes et\/ou aux conséquences d’expériences émotionelles ?\n<span class=\"tooltiptext\">Si vous pensez aux causes ou aux conséquences d'une ou plusieurs expériences émotionelles (positives ou négatives) actuelles ou passées. Quelques exemples : se demander ce qui a causé une dispute avec son\/sa conjoint(e); réfléchir aux conséquences d'un appel de téléphone énervant; se demander pourquoi on a des difficultés à se concentrer; l'anniversaire d'un ami; pourquoi vous vous sentez mal ou stressé(e); penser à pourquoi vous avez raté une certaine tâche; penser aux causes et conséquences d'avoir raté un examen ou une interview pour un job; etc.<\/span>\n<\/div>",
                        "label_parsed": "<div class=\"tooltip\">\nDans quelle mesure avez-vous pensé aux causes et\/ou aux conséquences d’expériences émotionelles ?\n<span class=\"tooltiptext\">Si vous pensez aux causes ou aux conséquences d'une ou plusieurs expériences émotionelles (positives ou négatives) actuelles ou passées. Quelques exemples : se demander ce qui a causé une dispute avec son\/sa conjoint(e); réfléchir aux conséquences d'un appel de téléphone énervant; se demander pourquoi on a des difficultés à se concentrer; l'anniversaire d'un ami; pourquoi vous vous sentez mal ou stressé(e); penser à pourquoi vous avez raté une certaine tâche; penser aux causes et conséquences d'avoir raté un examen ou une interview pour un job; etc.<\/span>\n<\/div>",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 3,
                        "choices": {
                            "1": "Pas du tout",
                            "2": "Tout à fait"
                        }
                    },
                    {
                        "type": "range",
                        "choice_list": "replaying",
                        "type_options": "0,100,1",
                        "name": "replaying",
                        "label": "<div class=\"tooltip\">\nA quel point avez-vous rejoué dans votre esprit des parties d’expériences émotionnelles que vous avez vécues ?\n<span class=\"tooltiptext\">Si vous avez revécu en images certaines scènes de l'expérience émotionnelle, vous avez rejoué l'événement en pensées, peu importe si c'était positif ou négatif.<\/span>\n<\/div>",
                        "label_parsed": "<div class=\"tooltip\">\nA quel point avez-vous rejoué dans votre esprit des parties d’expériences émotionnelles que vous avez vécues ?\n<span class=\"tooltiptext\">Si vous avez revécu en images certaines scènes de l'expérience émotionnelle, vous avez rejoué l'événement en pensées, peu importe si c'était positif ou négatif.<\/span>\n<\/div>",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 3,
                        "choices": {
                            "1": "Pas du tout",
                            "2": "Tout à fait"
                        }
                    },
                    {
                        "type": "submit",
                        "choice_list": null,
                        "type_options": null,
                        "name": "submit",
                        "label": "Soumettre `r knitr::asis_output(\"\\U2714\")`",
                        "label_parsed": null,
                        "optional": 0,
                        "class": "",
                        "showif": "replaying != 50 && brooding != 50 && criticism != 50 && negativity != 50 && perseverance != 50",
                        "value": "",
                        "block_order": null,
                        "item_order": 4
                    }
                ],
                "settings": {
                    "maximum_number_displayed": 0,
                    "displayed_percentage_maximum": 100,
                    "add_percentage_points": 0,
                    "enable_instant_validation": 1,
                    "expire_after": 0,
                    "google_file_id": "1W1Pzjuva95jzynym0Y2VWd03JVor8BTbIwHhpqZ_sis",
                    "unlinked": 0,
                    "expire_invitation_after": 60,
                    "expire_invitation_grace": 9,
                    "hide_results": 0,
                    "use_paging": 1
                }
            }
        },
        {
            "type": "SkipBackward",
            "description": "Repeat 5 times a day",
            "position": 260,
            "special": "",
            "condition": "# we need to repeat the survey five times a day, so we check whether the nrow() is a multiple of the number of surveys by day\r\nlibrary(lubridate)\r\n\r\n# ===================================\r\n# ====== define all variables =======\r\n# ===================================\r\n\r\ndays_duration_study = 14\r\nsurveys_by_day      = 4\r\ntimezone            = \"CET\"\r\nto_day              = today(timezone)\r\nnow_date            = now(timezone)\r\nt_zero              = \"00:05\"\r\nlast_timepoint      = \"23:30\"\r\ntimepoints          = c(\"09:00\", \"13:00\",\"17:00\",\"21:00\")  # write just the hours\r\nESM_questionnaire   = EF_RUM_ESM_v2\r\n\r\n# ===================================\r\n# ===================================\r\n\r\n# we check whether the last answer or expired survey was after last timepoint OR if the now() time is after last time point\r\nformat(strptime(last(ESM_questionnaire$ended),\"%Y-%m-%d %H:%M:%S\"), \"%H:%M\") < last(timepoints) || if(exists(\"ESM_questionnaire$expired\")){  format(strptime(last(ESM_questionnaire$expired),\"%Y-%m-%d %H:%M:%S\"), \"%H:%M\") < last(timepoints) } else { FALSE } || format(strptime(now(),\"%Y-%m-%d %H:%M:%S\"), \"%H:%M\") < last(timepoints)\r\n\r\n\r\n",
            "if_true": 206
        },
        {
            "type": "SkipBackward",
            "description": "Repeat till n days of duration study",
            "position": 270,
            "special": "",
            "condition": "# repeat till the maximum number of surveys has been achieved\r\nlibrary(dplyr)\r\nlibrary(lubridate)\r\n\r\n# ===================================\r\n# ====== define all variables =======\r\n# ===================================\r\n\r\ndays_duration_study = 14\r\nsurveys_by_day      = 4\r\ntimezone            = \"CET\"\r\nto_day              = today(timezone)\r\nnow_date            = now(timezone)\r\nt_zero              = \"00:05\"\r\nlast_timepoint      = \"23:30\"\r\ntimepoints          = c(\"09:00\", \"13:00\",\"17:00\",\"21:00\")  # write just the hours\r\n\r\n# ===================================\r\n# ===================================\r\n\r\n\r\nmax_surveys = surveys_by_day * days_duration_study\r\n\r\n# days = EF_RUM_ESM_v2 %>% mutate(day = as.Date(created)) %>% summarize(n_days = n_distinct(day))\r\n\r\n## get date of the beginning of the study\r\n# enrolling questionnaire$created + 1 + n_days\r\n\r\ndate_start = as.Date(enrolling_survey$created)\r\nlast_day_study = as.Date(enrolling_survey$created)+ days(days_duration_study)\r\n\r\ntoday() < last_day_study",
            "if_true": 195
        },
        {
            "type": "Survey",
            "description": "End_questionnaires",
            "position": 290,
            "special": "",
            "survey_data": {
                "name": "End_questionnaires",
                "items": [
                    {
                        "type": "note",
                        "choice_list": null,
                        "type_options": null,
                        "name": "questionnaires",
                        "label": "## Questionnaires génériques de fin\n\nSuper, vous êtes arrivé jusqu'ici. Ces quatre questionnaires sont la dernière étape avant de clôturer cette partie de l'étude!\nVeuillez prendre votre temps pour répondre à ceux-ci. Ils nous permettent de savoir comment vous vous sentiez de manière générale lors de l'étude.",
                        "label_parsed": "<h2>Questionnaires génériques de fin<\/h2>\n<p>Super, vous êtes arrivé jusqu'ici. Ces quatre questionnaires sont la dernière étape avant de clôturer cette partie de l'étude!<br \/>\nVeuillez prendre votre temps pour répondre à ceux-ci. Ils nous permettent de savoir comment vous vous sentiez de manière générale lors de l'étude.<\/p>",
                        "optional": 1,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 1
                    },
                    {
                        "type": "note",
                        "choice_list": null,
                        "type_options": null,
                        "name": "QuestionGAD",
                        "label": "**Questionnaire 1 : Au cours des 14 derniers jours, à quelle fréquence les problèmes suivants vous ont-ils perturbé ?**",
                        "label_parsed": "<strong>Questionnaire 1 : Au cours des 14 derniers jours, à quelle fréquence les problèmes suivants vous ont-ils perturbé ?<\/strong>",
                        "optional": 1,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 2
                    },
                    {
                        "type": "mc_button",
                        "choice_list": "GAD_1",
                        "type_options": null,
                        "name": "GAD_1",
                        "label": "Un sentiment de nervosité, d’anxiété ou de tension",
                        "label_parsed": "Un sentiment de nervosité, d’anxiété ou de tension",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 3,
                        "choices": {
                            "1": "Jamais",
                            "2": "Plusieurs Jours",
                            "3": "Plus de la moitié du temps",
                            "4": "Presque tous les jours"
                        }
                    },
                    {
                        "type": "mc_button",
                        "choice_list": "GAD_2",
                        "type_options": null,
                        "name": "GAD_2",
                        "label": "Une incapacité à arrêter de s’inquiéter ou à maîtriser ses inquiétudes",
                        "label_parsed": "Une incapacité à arrêter de s’inquiéter ou à maîtriser ses inquiétudes",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 4,
                        "choices": {
                            "1": "Jamais",
                            "2": "Plusieurs Jours",
                            "3": "Plus de la moitié du temps",
                            "4": "Presque tous les jours"
                        }
                    },
                    {
                        "type": "mc_button",
                        "choice_list": "GAD_3",
                        "type_options": null,
                        "name": "GAD_3",
                        "label": "Une inquiétude excessive à propos de différentes choses",
                        "label_parsed": "Une inquiétude excessive à propos de différentes choses",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 5,
                        "choices": {
                            "1": "Jamais",
                            "2": "Plusieurs Jours",
                            "3": "Plus de la moitié du temps",
                            "4": "Presque tous les jours"
                        }
                    },
                    {
                        "type": "mc_button",
                        "choice_list": "GAD_4",
                        "type_options": null,
                        "name": "GAD_4",
                        "label": "Des difficultés à se détendre",
                        "label_parsed": "Des difficultés à se détendre",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 6,
                        "choices": {
                            "1": "Jamais",
                            "2": "Plusieurs Jours",
                            "3": "Plus de la moitié du temps",
                            "4": "Presque tous les jours"
                        }
                    },
                    {
                        "type": "mc_button",
                        "choice_list": "GAD_5",
                        "type_options": null,
                        "name": "GAD_5",
                        "label": "Une agitation telle qu’il est difficile de tenir en place",
                        "label_parsed": "Une agitation telle qu’il est difficile de tenir en place",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 7,
                        "choices": {
                            "1": "Jamais",
                            "2": "Plusieurs Jours",
                            "3": "Plus de la moitié du temps",
                            "4": "Presque tous les jours"
                        }
                    },
                    {
                        "type": "mc_button",
                        "choice_list": "GAD_6",
                        "type_options": null,
                        "name": "GAD_6",
                        "label": "Une tendance à être facilement contrarié.e ou irritable",
                        "label_parsed": "Une tendance à être facilement contrarié.e ou irritable",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 8,
                        "choices": {
                            "1": "Jamais",
                            "2": "Plusieurs Jours",
                            "3": "Plus de la moitié du temps",
                            "4": "Presque tous les jours"
                        }
                    },
                    {
                        "type": "mc_button",
                        "choice_list": "GAD_7",
                        "type_options": null,
                        "name": "GAD_7",
                        "label": "Un sentiment de peur, comme si quelque chose deterrible risquait de se produire",
                        "label_parsed": "Un sentiment de peur, comme si quelque chose deterrible risquait de se produire",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 9,
                        "choices": {
                            "1": "Jamais",
                            "2": "Plusieurs Jours",
                            "3": "Plus de la moitié du temps",
                            "4": "Presque tous les jours"
                        }
                    },
                    {
                        "type": "note",
                        "choice_list": null,
                        "type_options": null,
                        "name": "QuestionBDI_II",
                        "label": "**Questionnaire 2 : Ce questionnaire comporte 21 groupes d’énoncés. Veuillez lire avec soin chacun de ces groupes puis, dans chaque groupe, choisissez l’énoncé qui décrit le mieux comment vous vous êtes senti(e) au cours des deux dernières semaines, incluant aujourd’hui. Si, dans un groupe d’énoncés, vous en trouvez plusieurs qui semblent décrire également bien ce que vous ressentez, choisissez celui qui est le plus intense des deux.**",
                        "label_parsed": "<strong>Questionnaire 2 : Ce questionnaire comporte 21 groupes d’énoncés. Veuillez lire avec soin chacun de ces groupes puis, dans chaque groupe, choisissez l’énoncé qui décrit le mieux comment vous vous êtes senti(e) au cours des deux dernières semaines, incluant aujourd’hui. Si, dans un groupe d’énoncés, vous en trouvez plusieurs qui semblent décrire également bien ce que vous ressentez, choisissez celui qui est le plus intense des deux.<\/strong>",
                        "optional": 1,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 10
                    },
                    {
                        "type": "mc",
                        "choice_list": "BDI2_1",
                        "type_options": null,
                        "name": "BDI2_1",
                        "label": "Tristesse",
                        "label_parsed": "Tristesse",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 11,
                        "choices": {
                            "1": "Je ne me sens pas triste",
                            "2": "Je me sens très souvent triste",
                            "3": "Je suis tout le temps triste",
                            "4": "Je suis si triste ou si malheureux (se) que ce n’est pas supportable"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "BDI2_2",
                        "type_options": null,
                        "name": "BDI2_2",
                        "label": "Pessimisme",
                        "label_parsed": "Pessimisme",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 12,
                        "choices": {
                            "1": "Je ne suis pas particulièrement découragé(e) face à mon avenir",
                            "2": "Je me sens plus découragé qu’avant face à mon avenir",
                            "3": "Je ne m’attends pas à ce que les choses s’arrangent pour moi",
                            "4": "J’ai le sentiment que mon avenir est sans espoir et qu’il ne peut qu’empirer"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "BDI2_3",
                        "type_options": null,
                        "name": "BDI2_3",
                        "label": "Echecs dans le passé",
                        "label_parsed": "Echecs dans le passé",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 13,
                        "choices": {
                            "1": "Je n’ai pas le sentiment d’avoir échoué dans la vie, d’être un(e) raté(e)",
                            "2": "J’ai échoué plus souvent que je n’aurais dû",
                            "3": "Quand je pense à mon passé, Je constate un grand nombre d’échecs",
                            "4": "J’ai le sentiment d’avoir complètement raté ma vie"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "BDI2_4",
                        "type_options": null,
                        "name": "BDI2_4",
                        "label": "Perte de plaisir",
                        "label_parsed": "Perte de plaisir",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 14,
                        "choices": {
                            "1": "J’éprouve toujours autant de plaisir qu’avant aux choses qui me plaisent",
                            "2": "Je n’éprouve pas autant de plaisir aux choses qu’avant",
                            "3": "J’éprouve très peu de plaisir aux choses qui me plaisaient habituellement",
                            "4": "Je n’éprouve aucun plaisir aux choses qui me plaisaient habituellement."
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "BDI2_5",
                        "type_options": null,
                        "name": "BDI2_5",
                        "label": "Sentiment de culpabilité",
                        "label_parsed": "Sentiment de culpabilité",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 15,
                        "choices": {
                            "1": "Je ne me sens pas particulièrement coupable",
                            "2": "Je me sens coupable pour bien des choses que j’ai faites ou que j’aurais dû faire",
                            "3": "Je me sens coupable la plupart du temps",
                            "4": "Je me sens tout le temps coupable"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "BDI2_6",
                        "type_options": null,
                        "name": "BDI2_6",
                        "label": "Sentiment d'être puni",
                        "label_parsed": "Sentiment d'être puni",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 16,
                        "choices": {
                            "1": "Je n’ai pas le sentiment d’être puni(e)",
                            "2": "Je sens que je pourrais être puni(e)",
                            "3": "Je m’attends à être puni(e)",
                            "4": "J’ai le sentiment d’être puni(e)"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "BDI2_7",
                        "type_options": null,
                        "name": "BDI2_7",
                        "label": "Sentiments négatifs envers soi-même",
                        "label_parsed": "Sentiments négatifs envers soi-même",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 17,
                        "choices": {
                            "1": "Mes sentiments envers moi-même n’ont pas changé",
                            "2": "J’ai perdu confiance en moi",
                            "3": "Je suis déçu(e) par moi-même",
                            "4": "Je ne m’aime pas du tout"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "BDI2_8",
                        "type_options": null,
                        "name": "BDI2_8",
                        "label": "Attitude critique envers soi",
                        "label_parsed": "Attitude critique envers soi",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 18,
                        "choices": {
                            "1": "Je ne me blâme pas ou ne me critique pas plus que d’habitude",
                            "2": "Je suis plus critique envers moi-même que d’habitude",
                            "3": "Je me reproche tous mes défauts",
                            "4": "Je me reproche tous les malheurs qui arrivent"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "BDI2_9",
                        "type_options": null,
                        "name": "BDI2_9",
                        "label": "Pensées ou désir de suicide",
                        "label_parsed": "Pensées ou désir de suicide",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 19,
                        "choices": {
                            "1": "Je ne pense pas du tout à me suicider",
                            "2": "Il m’arrive de penser à me suicider, mais je ne le ferai pas",
                            "3": "J’aimerais me suicider",
                            "4": "Je me suiciderais si l’occasion se présentait"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "BDI2_10",
                        "type_options": null,
                        "name": "BDI2_10",
                        "label": "Pleurs",
                        "label_parsed": "Pleurs",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 20,
                        "choices": {
                            "1": "Je ne pleure pas plus qu’avant",
                            "2": "Je pleure plus qu’avant",
                            "3": "Je pleure pour la moindre petite chose",
                            "4": "Je voudrais pleurer mais je n’en suis pas capable"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "BDI2_11",
                        "type_options": null,
                        "name": "BDI2_11",
                        "label": "Agitation",
                        "label_parsed": "Agitation",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 21,
                        "choices": {
                            "1": "Je ne suis pas plus agité(e) ou plus tendu(e) que d’habitude",
                            "2": "Je me sens plus agité(e) ou plus tendu(e) que d’habitude",
                            "3": "Je suis si agité(e) ou tendu(e) que j’ai du mal à rester tranquille",
                            "4": "Je suis si agité(e) ou tendu(e) que je dois continuellement bouger ou faire quelque chose"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "BDI2_12",
                        "type_options": null,
                        "name": "BDI2_12",
                        "label": "Perte d'intérêt",
                        "label_parsed": "Perte d'intérêt",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 22,
                        "choices": {
                            "1": "Je n’ai pas perdu d’intérêt pour les gens ou pour les activités",
                            "2": "Je m’intéresse moins qu’avant aux gens et aux choses",
                            "3": "Je ne m’intéresse presque plus aux gens et aux choses",
                            "4": "J’ai du mal à m’intéresser à quoi que ce soit"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "BDI2_13",
                        "type_options": null,
                        "name": "BDI2_13",
                        "label": "Indécision",
                        "label_parsed": "Indécision",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 23,
                        "choices": {
                            "1": "Je prends des décisions toujours aussi bien qu’avant",
                            "2": "Il m’est plus difficile que d’habitude de prendre des décisions",
                            "3": "J’ai beaucoup plus de mal qu’avant à prendre des décisions",
                            "4": "J’ai du mal à prendre n’importe quelle décision"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "BDI2_14",
                        "type_options": null,
                        "name": "BDI2_14",
                        "label": "Dévalorisation",
                        "label_parsed": "Dévalorisation",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 24,
                        "choices": {
                            "1": "Je pense être quelqu’un de valable",
                            "2": "Je ne crois pas avoir autant de valeur ni être aussi utile qu’avant",
                            "3": "Je me sens moins valable que les autres",
                            "4": "Je sens que je ne vaux absolument rien"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "BDI2_15",
                        "type_options": null,
                        "name": "BDI2_15",
                        "label": "Perte d'énergie",
                        "label_parsed": "Perte d'énergie",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 25,
                        "choices": {
                            "1": "J’ai toujours autant d’énergie qu’avant",
                            "2": "J’ai moins d’énergie qu’avant",
                            "3": "Je n’ai pas assez d’énergie pour pouvoir faire grand chose",
                            "4": "J’ai trop peu d’énergie pour faire quoi que ce soit"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "BDI2_16",
                        "type_options": null,
                        "name": "BDI2_16",
                        "label": "Modification dans les habitudes de sommeil",
                        "label_parsed": "Modification dans les habitudes de sommeil",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 26,
                        "choices": {
                            "1": "Mes habitudes de sommeil n’ont pas changé",
                            "2": "Je dors un peu plus que d’habitude OU Je dors un peu moins que d’habitude",
                            "3": "Je dors beaucoup plus que d’habitude OU Je dors beaucoup moins que d’habitude",
                            "4": "Je dors  presque toute la journée OU Je me réveille une ou deux heures plus tôt et je suis incapable de ma rendormir"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "BDI2_17",
                        "type_options": null,
                        "name": "BDI2_17",
                        "label": "Irritabilité",
                        "label_parsed": "Irritabilité",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 27,
                        "choices": {
                            "1": "Je ne suis pas plus irritable que d’habitude",
                            "2": "Je suis plus irritable que d’habitude",
                            "3": "Je suis beaucoup plus irritable que d’habitude",
                            "4": "Je suis constamment irritable"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "BDI2_18",
                        "type_options": null,
                        "name": "BDI2_18",
                        "label": "Modifications de l'appétit",
                        "label_parsed": "Modifications de l'appétit",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 28,
                        "choices": {
                            "1": "Mon appétit n’a pas changé",
                            "2": "J’ai un peu moins d’appétit que d’habitude OU J’ai un peu plus d’appétit que d’habitude",
                            "3": "J’ai beaucoup moins d’appétit que d’habitude OU J’ai beaucoup plus d’appétit que d’habitude",
                            "4": "Je n’ai pas d’appétit du tout OU J’ai constamment envie de manger"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "BDI2_19",
                        "type_options": null,
                        "name": "BDI2_19",
                        "label": "Difficulté de se concentrer",
                        "label_parsed": "Difficulté de se concentrer",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 29,
                        "choices": {
                            "1": "Je parviens à me concentrer toujours aussi bien qu’avant",
                            "2": "Je ne parviens à me concentrer aussi bien qu’avant",
                            "3": "J’ai du mal à me concentrer longtemps sur quoi que ce soit",
                            "4": "Je me trouve incapable de me concentrer sur quoi que ce soit"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "BDI2_20",
                        "type_options": null,
                        "name": "BDI2_20",
                        "label": "Fatigue",
                        "label_parsed": "Fatigue",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 30,
                        "choices": {
                            "1": "Je ne suis pas plus fatigué(e) que d’habitude",
                            "2": "Je me fatigue plus facilement que d’habitude",
                            "3": "Je suis trop fatigué(e) pour faire un grand nombre de choses que je faisais avant",
                            "4": "Je suis trop fatigué(e) pour faire la plupart des choses que je faisais avant"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "BDI2_21",
                        "type_options": null,
                        "name": "BDI2_21",
                        "label": "Perte d'intérêt pour le sexe",
                        "label_parsed": "Perte d'intérêt pour le sexe",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 31,
                        "choices": {
                            "1": "Je n’ai pas noté de changement récent dans mon intérêt pour le sexe",
                            "2": "Le sexe m’intéresse moins qu’avant",
                            "3": "Le sexe m’intéresse beaucoup moins maintenant",
                            "4": "J’ai perdu tout intérêt pour le sexe"
                        }
                    },
                    {
                        "type": "note",
                        "choice_list": null,
                        "type_options": null,
                        "name": "reread",
                        "label": "**Vérifiez que vous ayez bien répondu à tout avant de soumettre.**",
                        "label_parsed": "<strong>Vérifiez que vous ayez bien répondu à tout avant de soumettre.<\/strong>",
                        "optional": 1,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 32
                    },
                    {
                        "type": "submit",
                        "choice_list": null,
                        "type_options": null,
                        "name": "submit1",
                        "label": "Passer à la suite",
                        "label_parsed": "Passer à la suite",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 33
                    },
                    {
                        "type": "note",
                        "choice_list": null,
                        "type_options": null,
                        "name": "QuestionSTAI_T",
                        "label": "**Questionnaire 3 : Un certain nombre de phrases que l’on utilise pour se décrire sont données ci-dessous. Lisez chaque phrase, puis choisissez la réponse qui correspond le mieux à ce que vous ressentez généralement. Il n’y a pas de bonnes ni de mauvaises réponses. Ne passez pas trop de temps sur l’une ou l’autre de ces propositions et indiquez la réponse qui décrit le mieux vos sentiments habituels.**",
                        "label_parsed": "<strong>Questionnaire 3 : Un certain nombre de phrases que l’on utilise pour se décrire sont données ci-dessous. Lisez chaque phrase, puis choisissez la réponse qui correspond le mieux à ce que vous ressentez généralement. Il n’y a pas de bonnes ni de mauvaises réponses. Ne passez pas trop de temps sur l’une ou l’autre de ces propositions et indiquez la réponse qui décrit le mieux vos sentiments habituels.<\/strong>",
                        "optional": 1,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 34
                    },
                    {
                        "type": "mc",
                        "choice_list": "STAI_1",
                        "type_options": null,
                        "name": "STAI_1",
                        "label": "Je me sens de bonne humeur, aimable",
                        "label_parsed": "Je me sens de bonne humeur, aimable",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 35,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "STAI_2",
                        "type_options": null,
                        "name": "STAI_2",
                        "label": "Je me sens nerveux (nerveuse) et agité.e",
                        "label_parsed": "Je me sens nerveux (nerveuse) et agité.e",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 36,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "STAI_3",
                        "type_options": null,
                        "name": "STAI_3",
                        "label": "Je me sens content.e de moi",
                        "label_parsed": "Je me sens content.e de moi",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 37,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "STAI_4",
                        "type_options": null,
                        "name": "STAI_4",
                        "label": "Je voudrais être aussi heureux (heureuse) que les autres semblent l’être",
                        "label_parsed": "Je voudrais être aussi heureux (heureuse) que les autres semblent l’être",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 38,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "STAI_5",
                        "type_options": null,
                        "name": "STAI_5",
                        "label": "J’ai un sentiment d’échec",
                        "label_parsed": "J’ai un sentiment d’échec",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 39,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "STAI_6",
                        "type_options": null,
                        "name": "STAI_6",
                        "label": "Je me sens reposé.e",
                        "label_parsed": "Je me sens reposé.e",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 40,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "STAI_7",
                        "type_options": null,
                        "name": "STAI_7",
                        "label": "J’ai tout mon sang-froid",
                        "label_parsed": "J’ai tout mon sang-froid",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 41,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "STAI_8",
                        "type_options": null,
                        "name": "STAI_8",
                        "label": "J’ai l’impression que les difficultés s’accumulent à un tel point que je ne peux plus les surmonter",
                        "label_parsed": "J’ai l’impression que les difficultés s’accumulent à un tel point que je ne peux plus les surmonter",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 42,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "STAI_9",
                        "type_options": null,
                        "name": "STAI_9",
                        "label": "Je m’inquiète à propos de choses sans importance",
                        "label_parsed": "Je m’inquiète à propos de choses sans importance",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 43,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "STAI_10",
                        "type_options": null,
                        "name": "STAI_10",
                        "label": "Je suis heureux (se)",
                        "label_parsed": "Je suis heureux (se)",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 44,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "STAI_11",
                        "type_options": null,
                        "name": "STAI_11",
                        "label": "J’ai des pensées qui me perturbent",
                        "label_parsed": "J’ai des pensées qui me perturbent",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 45,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "STAI_12",
                        "type_options": null,
                        "name": "STAI_12",
                        "label": "Je manque de confiance en moi",
                        "label_parsed": "Je manque de confiance en moi",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 46,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "STAI_13",
                        "type_options": null,
                        "name": "STAI_13",
                        "label": "Je me sens sans inquiétude, en sécurité, en sûreté",
                        "label_parsed": "Je me sens sans inquiétude, en sécurité, en sûreté",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 47,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "STAI_14",
                        "type_options": null,
                        "name": "STAI_14",
                        "label": "Je prends facilement des décisions",
                        "label_parsed": "Je prends facilement des décisions",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 48,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "STAI_15",
                        "type_options": null,
                        "name": "STAI_15",
                        "label": "Je me sens incompétent.e, pas à la hauteur",
                        "label_parsed": "Je me sens incompétent.e, pas à la hauteur",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 49,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "STAI_16",
                        "type_options": null,
                        "name": "STAI_16",
                        "label": "Je suis satisfait.e",
                        "label_parsed": "Je suis satisfait.e",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 50,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "STAI_17",
                        "type_options": null,
                        "name": "STAI_17",
                        "label": "Des idées sans importance trottant dans ma tête me dérangent",
                        "label_parsed": "Des idées sans importance trottant dans ma tête me dérangent",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 51,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "STAI_18",
                        "type_options": null,
                        "name": "STAI_18",
                        "label": "Je prends les déceptions tellement à cœur que je les oublie difficilement",
                        "label_parsed": "Je prends les déceptions tellement à cœur que je les oublie difficilement",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 52,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "STAI_19",
                        "type_options": null,
                        "name": "STAI_19",
                        "label": "Je suis une personne posée, solide, stable",
                        "label_parsed": "Je suis une personne posée, solide, stable",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 53,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "STAI_20",
                        "type_options": null,
                        "name": "STAI_20",
                        "label": "Je deviens tendu.e et agité.e quand je réfléchis à mes soucis",
                        "label_parsed": "Je deviens tendu.e et agité.e quand je réfléchis à mes soucis",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 54,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "note",
                        "choice_list": null,
                        "type_options": null,
                        "name": "reread2",
                        "label": "**Vérifiez que vous ayez bien répondu à tout avant de soumettre.**",
                        "label_parsed": "<strong>Vérifiez que vous ayez bien répondu à tout avant de soumettre.<\/strong>",
                        "optional": 1,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 55
                    },
                    {
                        "type": "submit",
                        "choice_list": null,
                        "type_options": null,
                        "name": "submit2",
                        "label": "Passer au dernier questionnaire",
                        "label_parsed": "Passer au dernier questionnaire",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 56
                    },
                    {
                        "type": "note",
                        "choice_list": null,
                        "type_options": null,
                        "name": "QuestionRRS",
                        "label": "**Questionnaire 4 : Les gens pensent et font différentes choses lorsqu'ils se sentent découragés, tristes ou déprimés. Veuillez lire chacun des énoncés ci-dessous et indiquer à quelle fréquence vous faites ce qui est mentionné lorsque vous vous sentez découragé, triste ou déprimé. Indiquez ce que vous faites habituellement et non ce que vous pensez que vous devriez faire.**",
                        "label_parsed": "<strong>Questionnaire 4 : Les gens pensent et font différentes choses lorsqu'ils se sentent découragés, tristes ou déprimés. Veuillez lire chacun des énoncés ci-dessous et indiquer à quelle fréquence vous faites ce qui est mentionné lorsque vous vous sentez découragé, triste ou déprimé. Indiquez ce que vous faites habituellement et non ce que vous pensez que vous devriez faire.<\/strong>",
                        "optional": 1,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 57
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_1",
                        "type_options": null,
                        "name": "RRS_1",
                        "label": "Penser à quel point vous vous sentez seul.e.",
                        "label_parsed": "Penser à quel point vous vous sentez seul.e.",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 58,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_2",
                        "type_options": null,
                        "name": "RRS_2",
                        "label": "Penser « je ne serai pas capable de faire mon travail parce que je me sens tellement mal »",
                        "label_parsed": "Penser « je ne serai pas capable de faire mon travail parce que je me sens tellement mal »",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 59,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_3",
                        "type_options": null,
                        "name": "RRS_3",
                        "label": "Penser à vos sensations de fatigue et de douleur",
                        "label_parsed": "Penser à vos sensations de fatigue et de douleur",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 60,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_4",
                        "type_options": null,
                        "name": "RRS_4",
                        "label": "Penser à quel point il est difficile de vous concentrer",
                        "label_parsed": "Penser à quel point il est difficile de vous concentrer",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 61,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_5",
                        "type_options": null,
                        "name": "RRS_5",
                        "label": "Penser: « Qu’ai-je fait pour mériter cela? »",
                        "label_parsed": "Penser: « Qu’ai-je fait pour mériter cela? »",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 62,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_6",
                        "type_options": null,
                        "name": "RRS_6",
                        "label": "Penser à quel point vous vous sentez passif(ve) et démotivé.e.",
                        "label_parsed": "Penser à quel point vous vous sentez passif(ve) et démotivé.e.",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 63,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_7",
                        "type_options": null,
                        "name": "RRS_7",
                        "label": "Analyser des événements récents pour essayer de comprendre pourquoi vous êtes déprimé.e.",
                        "label_parsed": "Analyser des événements récents pour essayer de comprendre pourquoi vous êtes déprimé.e.",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 64,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_8",
                        "type_options": null,
                        "name": "RRS_8",
                        "label": "Penser à quel point vous ne semblez plus rien ressentir.",
                        "label_parsed": "Penser à quel point vous ne semblez plus rien ressentir.",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 65,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_9",
                        "type_options": null,
                        "name": "RRS_9",
                        "label": "Penser « Pourquoi ne puis-je pas me mettre au travail ? »",
                        "label_parsed": "Penser « Pourquoi ne puis-je pas me mettre au travail ? »",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 66,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_10",
                        "type_options": null,
                        "name": "RRS_10",
                        "label": "Penser «Pourquoi est-ce que je réagis toujours de cette façon ?»",
                        "label_parsed": "Penser «Pourquoi est-ce que je réagis toujours de cette façon ?»",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 67,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_11",
                        "type_options": null,
                        "name": "RRS_11",
                        "label": "Partir seul et penser aux raisons pour lesquelles vous vous sentez comme cela.",
                        "label_parsed": "Partir seul et penser aux raisons pour lesquelles vous vous sentez comme cela.",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 68,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_12",
                        "type_options": null,
                        "name": "RRS_12",
                        "label": "Écrire ce à quoi vous pensez et l'analyser",
                        "label_parsed": "Écrire ce à quoi vous pensez et l'analyser",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 69,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_13",
                        "type_options": null,
                        "name": "RRS_13",
                        "label": "Penser à une situation récente en souhaitant que ça se soit mieux passé.",
                        "label_parsed": "Penser à une situation récente en souhaitant que ça se soit mieux passé.",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 70,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_14",
                        "type_options": null,
                        "name": "RRS_14",
                        "label": "Penser: « Je ne serai pas capable de me concentrer si je continue à me sentir comme cela»",
                        "label_parsed": "Penser: « Je ne serai pas capable de me concentrer si je continue à me sentir comme cela»",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 71,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_15",
                        "type_options": null,
                        "name": "RRS_15",
                        "label": "Penser : «Pourquoi ai-je des problèmes que les autres n'ont pas ? »",
                        "label_parsed": "Penser : «Pourquoi ai-je des problèmes que les autres n'ont pas ? »",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 72,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_16",
                        "type_options": null,
                        "name": "RRS_16",
                        "label": "Penser « Pourquoi ne puis-je pas mieux gérer les choses ? »",
                        "label_parsed": "Penser « Pourquoi ne puis-je pas mieux gérer les choses ? »",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 73,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_17",
                        "type_options": null,
                        "name": "RRS_17",
                        "label": "Penser à quel point vous vous sentez triste.",
                        "label_parsed": "Penser à quel point vous vous sentez triste.",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 74,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_18",
                        "type_options": null,
                        "name": "RRS_18",
                        "label": "Penser à tous vos défauts, faiblesses, fautes et erreurs.",
                        "label_parsed": "Penser à tous vos défauts, faiblesses, fautes et erreurs.",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 75,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_19",
                        "type_options": null,
                        "name": "RRS_19",
                        "label": "Penser à quel point vous n’avez envie de rien faire.",
                        "label_parsed": "Penser à quel point vous n’avez envie de rien faire.",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 76,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_20",
                        "type_options": null,
                        "name": "RRS_20",
                        "label": "Analyser votre personnalité pour essayer de comprendre pourquoi vous êtes déprimé.e.",
                        "label_parsed": "Analyser votre personnalité pour essayer de comprendre pourquoi vous êtes déprimé.e.",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 77,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_21",
                        "type_options": null,
                        "name": "RRS_21",
                        "label": "Aller quelque part seul.e pour penser à ce que vous ressentez",
                        "label_parsed": "Aller quelque part seul.e pour penser à ce que vous ressentez",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 78,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "mc",
                        "choice_list": "RRS_22",
                        "type_options": null,
                        "name": "RRS_22",
                        "label": "Penser à quel point vous êtes en colère contre vous-même",
                        "label_parsed": "Penser à quel point vous êtes en colère contre vous-même",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 79,
                        "choices": {
                            "1": "Presque jamais",
                            "2": "Parfois",
                            "3": "Souvent",
                            "4": "Presque toujours"
                        }
                    },
                    {
                        "type": "note",
                        "choice_list": null,
                        "type_options": null,
                        "name": "reread3",
                        "label": "**Vérifiez que vous ayez bien répondu à tout avant de soumettre.**",
                        "label_parsed": "<strong>Vérifiez que vous ayez bien répondu à tout avant de soumettre.<\/strong>",
                        "optional": 1,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 80
                    },
                    {
                        "type": "submit",
                        "choice_list": null,
                        "type_options": null,
                        "name": "submit3",
                        "label": "Envoyer le questionnaire",
                        "label_parsed": "Envoyer le questionnaire",
                        "optional": 0,
                        "class": "",
                        "showif": "",
                        "value": "",
                        "block_order": null,
                        "item_order": 81
                    }
                ],
                "settings": {
                    "maximum_number_displayed": 0,
                    "displayed_percentage_maximum": 100,
                    "add_percentage_points": 0,
                    "enable_instant_validation": 1,
                    "expire_after": 0,
                    "google_file_id": "10I-jNzQ21U7Jqh8NvljNIo2d_0zA2JKRQPbnDUcuXRI",
                    "unlinked": 0,
                    "expire_invitation_after": 0,
                    "expire_invitation_grace": 0,
                    "hide_results": 0,
                    "use_paging": 0
                }
            }
        },
        {
            "type": "Endpage",
            "description": "END -  FINI",
            "position": 300,
            "special": "",
            "body": "## L'étude est désormais terminée!\r\n\r\n```{r, include=FALSE, warning = FALSE, message=FALSE, echo=FALSE}\r\n\r\nlibrary(dplyr)\r\nlibrary(lubridate)\r\n\r\n# ===================================\r\n# ====== define all variables =======\r\n# ===================================\r\n\r\ndays_duration_study = 14\r\nsurveys_by_day      = 4\r\ntimezone            = \"CET\"\r\nto_day              = today(timezone)\r\nnow_date            = now(timezone)\r\nt_zero              = \"00:05\"\r\nlast_timepoint      = \"23:30\"\r\ntimepoints          = c(\"09:00\", \"13:00\",\"17:00\",\"21:00\")  # write just the hours\r\nESM_questionnaire   = EF_RUM_ESM_v2\r\n\r\n# ===================================\r\n# ===================================\r\n\r\n\r\n\r\n\r\ndays_done = 0\r\n\r\nmax_surveys = surveys_by_day * days_duration_study\r\n\r\n# lets check how many questionnaires they filled\r\n\r\ndate_start = as.Date(enrolling_survey$created)\r\n\r\nlast_day_study = as.Date(enrolling_survey$created)+ days(days_duration_study)\r\n\r\n# get the numbers of day left\r\ndays_left = last_day_study - today()\r\n# difftime(df$datevar1 ,df$datevar2 , units = c(\"days\"))\r\n\r\ndays_done = days_duration_study - days_left\r\n\r\n# let's create a progress visual\r\n\r\nprogress = \"\"\r\nfor(i in 1:days_duration_study) {\r\n  if(i <= days_done) {\r\n  progress = paste0(progress, \"\\n### <span style='color:green'>**Jour** **\",i,\"**<\/span> ![](https:\/\/i.imgur.com\/nUY7Ifu.png){width=50px}\\n\")\r\n  } else if (i > days_done) {\r\n  progress = paste0(progress, \"\\n### <span style='color:darkgray'>**Jour** **\",i,\"**<\/span> ![](https:\/\/i.imgur.com\/xuosH6S.png){width=50px}\\n\")\r\n  }\r\n  \r\n}\r\n\r\n```\r\n\r\nMerci infinement d'avoir participé à cette étude et d'avoir été jusqu'au bout de la première partie de celle-ci. C'est grâce à vous et aux autres participants que cette recherche peut avoir lieu.\r\n\r\nMaintenant que vous avez fini la première partie de l'étude, Yorgo Hoebeke reprendra contact avec vous pour fixer les deux rendez-vous de la 2e partie de l'étude via un doodle. \r\n\r\n### Merci infinement.\r\n\r\n***\r\n\r\n### Votre progression :\r\n`r progress`\r\n\r\n***"
        },
        {
            "type": "Endpage",
            "description": "EXCLU - mail pas confirmé",
            "position": 310,
            "special": "",
            "body": "Vous n'avez pas confirmé votre adresse mail ou votre numéro de gsm à temps.\r\n\r\nSi vous voulez quand même participer à l'étude, cliquez d'abord sur ce lien : http:\/\/formr.org\/logout.\r\n\r\nPuis rendez vous sur ce lien: https:\/\/testyorgo.formr.org"
        },
        {
            "type": "SkipBackward",
            "description": "",
            "position": 320,
            "special": "",
            "condition": "",
            "if_true": ""
        }
    ],
    "settings": {
        "header_image_path": "",
        "description": "",
        "footer_text": "Contactez le [gestionnaire de l'étude](mailto:yorgo.hoebeke@uclouvain.be) en cas de questions.",
        "public_blurb": "",
        "cron_active": 1,
        "custom_js": "document.getElementById(\"item0\").remove();\n\nlet node = document.getElementById(\"item0\");\nif (node.parentNode) {\n  node.parentNode.removeChild(node);\n}",
        "custom_css": "body, td { \nfont:normal normal 150%\/1.2 verdana, arial; \n}\n\n#item0 {\n    display:none;\n}\n\nform.form-horizontal div.form-row div.controls div.mc-table label{\n\tfloat:left;\n\tdisplay:inline-block !important;\n\tmax-width:100%;\n\twidth:100%;\n}\n\n.run-container a.btn.btn-checked, .run-container button.btn.btn-checked, .run-container label.btn.btn-checked {\n    background-color: #337ab7!important;\n    color: white;\n    font-weight: bold;\n    z-index: 2;\n    border: 1px solid #000;\n    outline: 1px;\n    -webkit-box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);\n    box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);\n}\n\n.progress-container{\n    display:none;\n}\n\n.run-container .run_content{\n\tfont-size:1.1em;\n\tline-height:1.4em;\n}\n\n\n\n\/* this is for the multiple choices at the end questionnaires *\/\n.form-horizontal .item-mc .control-label{\n    padding-top: 5px;\n    margin-bottom: 10px;\n    font-weight:600;\n    color:#0f72c7;\n}\n\n.form-horizontal .item-mc_button .control-label{\n    padding-top: 5px;\n    margin-bottom: 10px;\n    font-weight:600;\n    color:#0f72c7;\n}\n\nform.form-horizontal div.form-row div.controls div.mc-table label {\n    display: inline-block;\n    padding-right: 5px;\n    padding-top: 5px;\n    width: 100%;\n}\n\n.study-name-EF_RUM_ESM_v2 .item-range .control-label::before {\n  content: \"\";\n}\n\nform.form-horizontal div.form-row div.controls label.keep-label {\n    margin-right: 5px;\n    font-size: 0.8em !important;\n}\n\nform.form-horizontal div.form-row div.controls label {\n    font-size: 1em;\n}\n\n.run-container .form-group .control-label, .run-container .form-group label {\n    font-size: 1em;\n}\n\n.form-group .ws-range {\n    width: 50%;\n    margin-top: 10px;\n}\n\n.item-email .controls-inner {\n    display: block;\n    margin-top: -10px;\n}\n\n.item-tel .controls-inner {\n    display: block;\n    margin-top: -10px;\n}\n\n.ws-range .ws-range-progress {\n    background: #1383e2;\n}\n\n.ws-range .ws-range-thumb {\n    position: absolute;\n    display: block;\n    z-index: 4;\n    margin: -.38462em 0 0 -1.15385em;\n    height: 1.5em;\n    width: 1.5em;\n    background: #ccc;\n    border: .07692em solid darkblue;\n    cursor: pointer;\n    border-radius: 1.5em;\n    transition: background-color 400ms,border-color 400ms;\n}\n\n\/* Positionnement des labels en dessous du slider *\/\n\n.form-horizontal .item-range .controls, .form-horizontal .item-range_ticks .controls {\n    margin-left:20%;\n    margin-right:20%;\n    margin-top:20px;\n}\n\n\n.form-horizontal .item-range .control-label, .form-horizontal .item-range_ticks .control-label {\n    float: none;\n    width: 100%;\n    padding-top: 5px;\n    text-align: left;\n    white-space: normal;\n    margin-top:30px;\n    margin-bottom: 20px;\n    font-weight:600;\n    color:#0f72c7;\n}\n\n\ndiv.controls-inner {\n    position:relative!important;\n}\n    \nlabel.pad-left {\n    position: absolute!important;\n    top:25px;\n    right:0px;\n    text-align:right;\n}\n    \nlabel.pad-right {\n    position: absolute!important;\n    top:25px;\n    text-align:left;\n}\n    \n.form-group .ws-range {\n    margin-left:25%;\n    margin-right:25%;\n}\n\n\/*\n.form-group .ws-range-min.ws-range-progress {\n    color:#0f72c7;\n} *\/\n\n\/*\n.ws-range-thumb>span, .ws-range-thumb>span>span:before {\n    display: block;\n    content: attr(data-value)!important;\n    visibility: visible!important;\n}*\/\n\n.ws-range:before {\n    position: absolute;\n    left: 50%;\n    top: -34px;\n    width: 40px;\n    margin-left: -20px;\n    display: inline-block;\n    text-align: center;\n    content: attr(aria-valuenow)!important;\n    visibility: visible!important;\n    border: .07692em solid #ccc;\n}\n\n.ws-range .ws-range-thumb>span {\n    position: absolute;\n    margin: 0 0 3px -15px;\n    padding: 0;\n    border: 0;\n    left: 50%;\n    bottom: 1.46154em;\n    visibility: hidden;\n    width: 30px;\n    text-align: center;\n    background: 0;\n}\n\n.fmr-survey-page-count {\n    margin-top:40px;\n}\n\n\/* Tooltip container *\/\n.tooltip {\n  position: relative;\n  display: inline-block;\n  border-bottom: 1px dotted black; \/* If you want dots under the hoverable text *\/\n  font-size: 1em;\n  font-weight:600;\n}\n\n\/* Tooltip text *\/\n.tooltip .tooltiptext {\n    white-space: pre-line;\n  visibility: hidden;\n  background-color: black;\n  color: #fff;\n  text-align: left;\n    font-weight:500;\n  \/* Position the tooltip text - see examples below! *\/\n  width:100%;\n  max-width:500px;\n\n    border: solid;\n    border-color:  white;\n    border-width: 1px;\n    border-radius:6px;\n    padding:10px;\n    bottom: -50px;\n    left: 50%;\n    -webkit-transform: translateX(-50%);\n    -moz-transform: translateX(-50%);\n    -ms-transform: translateX(-50%);\n    -o-transform: translateX(-50%);\n    transform: translateX(-50%);\n    position: absolute;\n}\n\n\/* Show the tooltip text when you mouse over the tooltip container *\/\n.tooltip:hover .tooltiptext {\n  visibility: visible;\n}\n\n.tooltip:hover {\n      cursor:pointer;\n}"
    },
    "files": []
}